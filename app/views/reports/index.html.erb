<%= javascript_include_tag 'reports/payment_proof' %>
<h1>Comprobante Pago Trabajadores</h1>
<p></p>
<hr>
<h2>Buscar Planilla</h2>
<!-- S E A R C H   P A Y R O L L S -->
<legend>  
	<%= form_tag :search_payrolls_reports, :id => "search_payrolls_form", :class => "form-search", :method => "get" do %>
	<div class="control-group search">
	<%= text_field_tag 'start_date', '', :class => 'text_field', :readonly => true, :placeholder => 'Desde' %>
		<%= text_field_tag 'end_date', '', :class => 'text_field', :readonly => true, :placeholder => 'Hasta'  %>
		<button class="btn" id="search_payrolls" type="button">Buscar</button>
    </div>
  <% end %>
</legend>

<div id="payrolls_results"></div>
<!-- S E A R C H   P A Y R O L L S -->

<!-- E M P L O Y E E S -->
<div class="control-group">
	<hr>
    <h2>Empleados</h2>
    <div class="controls align-radio">
      <div class="options-left">
        <%= radio_button_tag 'select_method', 'all', true, class: 'align-checkbox' %>
        <%= label_tag 'select_method_all', "Todos", class: 'checkbox-label' %>
        <%= radio_button_tag 'select_method', 'boss', false, class: 'align-checkbox' %>
        <%= label_tag 'select_method_boss', "Jefe Inmediato", class: 'checkbox-label' %>
        <%= radio_button_tag 'select_method', 'department', false, class: 'align-checkbox' %>
        <%= label_tag 'select_method_department', "Por Departamento", class: 'checkbox-label' %>
      </div>
      <div class="options-right">
        <%= check_box_tag 'check-employees-right', '1', true, class: 'align-checkbox' %>
        <%= label_tag 'check-employees-right', 'Marcar/Desmarcar', class: 'checkbox-label' %>
      </div>
      <div style="clear:both"></div>
    </div>
</div>

<div class="controls padding-filter" id="list-departments">
	<% p = @department.empty? ? "No existen departamentos todavía" : "Por favor selecciona" %>
	<%= collection_select("departments", "employees", @department, :id, :name , :prompt => p) %>
</div>

<div class="controls padding-filter" id="list-superior">
	<% p = @superior.empty? ? "No existen jefes todavía" : "Por favor selecciona" %>
    <%= collection_select("superiors", "employees", @superior, :id, :full_name , :prompt => p) %>
</div>

<div class="controls padding-filter" id="employee-filter">
	<%= text_field_tag 'load_filter_employees_text', nil, :class => 'text_field search-image-employee' %> 
</div>

<div class="controls" id="marcar-desmarcar">
	<%= check_box_tag 'check-employees', '1', false, class: 'align-checkbox' %>
    <%= label_tag 'check-employees', 'Marcar/Desmarcar', class: 'checkbox-label' %>
</div>

<div class="controls lists">
	<div class="employees-list left-list">
  		<div class="employees-margin" id="no-save">
    		<% @employees.each do |employee| %>
      		<div class="checkbox-group">
		        <div class="checkbox-margin">
		          <%= check_box_tag 'left-list-employees', employee.id, employee.id,
						id: dom_id(employee) + '_left', 'data-id' => dom_id(employee), 
						'data-sup' => employee.employee_id, 
						class: 'align-checkbox', 
						'data-dep' => employee.department_id  %>
		          <%= label_tag dom_id(employee) + '_left', 
		          		"#{employee.entity.surname} #{employee.entity.name}", 
		              	:class => 'checkbox-label' %>
		        </div>
      		</div>         
    		<% end %>
  		</div>
	</div>

	<div class="control-buttons">
		<a href="#" id="add-to-list" class="btn btn-large button-list"><i class=" icon-arrow-right"></i></a>
	  	<a href="#" id="remove-to-list" class="btn btn-large button-list"><i class=" icon-arrow-left"></i></a>
	</div>

	<div class="employees-list list-right">
		<%= hidden_field_tag 'deduction[employee_ids][]', nil %>
	  	<div class="employees-margin" id="list-to-save"></div>
	</div>
	<div style="clear:both"></div>
</div>

<!-- E M P L O Y E E S -->
<input type="hidden" id="fetch_employees_deductions_path" value="<%= fetch_employees_deductions_path %>">